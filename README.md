# Project Name: PersonaBot

## Description

**PersonaBot** is an advanced humanoid robot capable of walking, with dual arms and dexterous hands. This project showcases its intelligent and natural interaction capabilities with humans using the latest multimodal large models. The robot not only performs end-to-end speech input to speech output with emotional responses, but also accompanies its answers with realistic, human-like gestures generated by motion generation models. Additionally, the robot displays a dynamic human-like face on its head's flexible screen.

**Key Features:**
1. **Mobility and Dexterity:** 
    - PersonaBot can walk, has dual arms, and dexterous hands, enabling it to perform complex tasks and interactions.
2. **Intelligent Interaction:** 
    - Utilizes state-of-the-art multimodal models to achieve end-to-end speech input to speech output.
    - Provides emotional responses and realistic human-like gestures during interactions.
3. **Human-like Presence:**
    - Displays a dynamic and natural human-like face on a flexible screen mounted on the robot's head.
    - Capable of holding a microphone and speaking into it.

**Project**
The core of the project is the "Demo Main Control Logic," which coordinates the robot's actions by interfacing with lower-level ROS1 and ROS2 nodes for navigation, arm control, and dexterous hand movements. Additionally, the software generates an HTML-based GUI for remote operators to control and monitor the robot in real-time.


## Getting Started

**Prerequisites**
Python 3.10
Required Python packages (listed in requirements.txt)

Install the required packages:
```
pip install -r requirements.txt
```

**Running the Project**
1. Set the PYTHONPATH environment variable to include the src directory:
```bash
export PYTHONPATH=$PYTHONPATH:$(pwd)/src
```
2. Start the web server:
```bash
./scripts/start_server.sh
```
3. Open your web browser and go to http://localhost:5000 to access the remote control interface.

In Windows,
cmd          
```cmd
set PYTHONPATH=%PYTHONPATH%;%cd%\src
```
PowerShell   
```powershell
$env:PYTHONPATH="$env:PYTHONPATH;$(Get-Location)\src"
```
Then run
```
python main.py
```

**ROS node setup**

ROS 2 node for controlling the Robot Arms are on a remote computer, need to make sure Python code here can correctly access it through network.
ROS_MASTER_URI environment variable tells a node where to find the rosmaster. All nodes in the network when launched should have the same ROS_MASTER_URI.   
ROS_HOSTNAME environment variable contains the address of the node, When node A connects to rosmaster it provides rosmaster with the value of ROS_HOSTNAME. rosmaster uses this address to tell other nodes how to contact node A.
1. Setup Remote ROS2 node
Set environment variable on the remote computer:
```bash
export ROS_DOMAIN_ID=0  # Make sure all computers in the local network use the same domain ID
export ROS_MASTER_URI=<remote_host_ip>:11311
export ROS_HOSTNAME=<local_host_ip>
```
2. Setup local computer
Make sure local computer and remote computers used the same domain ID
```bash
export ROS_DOMAIN_ID=0
export ROS_MASTER_URI=http://<remote_host_ip>:11311
export ROS_HOSTNAME=<local_host_ip>
```

